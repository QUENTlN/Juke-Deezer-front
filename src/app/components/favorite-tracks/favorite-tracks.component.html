<h1>Musiques favorites</h1>
<div class="tracks">
    <table class="table">
        <thead>
        <tr>
            <th class="min-width">#</th>
            <th class="min-width"></th>
            <th>Title</th>
            <th class="fixed-width">D.</th>
            <th class="end">
                <div class="d-flex justify-content-end">
                    <div *ngIf="isOneChecked()" class="dropdown w-1rem">
                        <button
                            id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                            <fa-icon [icon]="faEllipsisH"></fa-icon>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                            <li class="dropdown-item">
                                <a data-bs-toggle="modal" data-bs-target="#addToPlaylistModal">Ajouter à une
                                    playlist</a>
                            </li>
                            <li><a class="dropdown-item" (click)="removeFromFavorites()">Retirer des favoris</a></li>
                        </ul>
                    </div>
                    <div class="d-flex align-items-center w-1rem">
                        <input type="checkbox" id="all" (click)="checkAll()"
                               [checked]="isOneChecked()" class="form-check-input">
                    </div>
                </div>
            </th>
        </tr>
        </thead>

        <tbody>
        <tr *ngFor="let track of tracks; index as i" (click)="play(i)"
            [ngClass]="{'active': track.id == getCurrentTrackId()}">
            <th scope="row">
                <div class="nb-track">{{ i + 1 }} </div>
                <fa-icon [icon]="faPlayCircle" class="play"></fa-icon>
            </th>
            <td class="td-fav">
                <button *ngIf="!isTrackFavorite(track)" (click)="favorite(track); $event.stopPropagation();">
                    <fa-icon [icon]="farHeart"></fa-icon>
                </button>
                <button *ngIf="isTrackFavorite(track)" (click)="unfavorite(track); $event.stopPropagation();">
                    <fa-icon [icon]="fasHeart" class="favorite"></fa-icon>
                </button>
            </td>
            <td>
                <div class="title-container">
                    <img class="cover" [src]="track.album.cover" alt="">
                    <div class="title">{{ track.title }}</div>
                    <div class="feat-container" (click)="$event.stopPropagation()">
                            <span>
                                <a [routerLink]="['/artist-details', track.artist.id]"
                                   [state]=track.artist>
                                    {{track.artist.name}}
                                </a>
                            </span>
                    </div>
                    <div class="track-menu-container dropdown" (click)="$event.stopPropagation();">
                        <button
                            id="dropdownTrackMenu" data-bs-toggle="dropdown" aria-expanded="false">
                            <fa-icon [icon]="faEllipsisH" class="play"></fa-icon>
                        </button>

                        <ul class="dropdown-menu dropdown-menu-dark"
                            aria-labelledby="dropdownTrackMenu">
                            <li class="dropdown-item btn-group dropend">
                                <a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#addToPlaylistModal"
                                   (click)="setTrack(track)">Ajouter à une playlist</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </td>
            <td>{{ track.duration | chrono }}</td>
            <td class="end">
                <input type="checkbox" class="form-check-input" id="individual" [checked]="isChecked(track)"
                       (click)="check(track); $event.stopPropagation();">
            </td>
        </tr>
        </tbody>
    </table>
</div>

<app-add-to-playlist-form [tracksToAdd]="trackToAdd"></app-add-to-playlist-form>
